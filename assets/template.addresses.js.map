{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./scripts/templates/customers/addresses.js","webpack:///../node_modules/@shopify/theme-addresses/loader.js","webpack:///../node_modules/@shopify/theme-addresses/addressForm.js","webpack:///../node_modules/@shopify/theme-addresses/helpers.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_themeAddresses","selectors","hideClass","addressForms","document","querySelectorAll","addressesArr","Array","from","length","forEach","addressContainer","container","addressFields","querySelector","addressForm","deleteForm","button","addEventListener","classList","contains","map","addr","add","remove","showAllBlocks","AddressForm","event","confirmMessage","getAttribute","window","confirm","preventDefault","loadCountries","locale","fetch","GRAPHQL_ENDPOINT","method","headers","Content-Type","Access-Control-Allow-Origin","body","JSON","stringify","query","operationName","variables","supportedLocale","replace","toUpperCase","SUPPORTED_LOCALES","indexOf","substring","DEFAULT_LOCALE","then","res","json","countries","data","FIELD_REGEXP","INPUT_SELECTORS","lastName","firstName","company","address1","address2","country","zone","postalCode","city","phone","rootEl","options","formElements","inputSelectors","elements","keys","inputKey","input","wrapper","parentElement","labels","id","to","index","arguments","nextSource","nextKey","elementKey","element","TypeError","shippingCountriesOnly","location","origin","meta","ships_to_countries","catch","Promise","resolve","shippingCountryCodes","countrySelect","duplicatedCountrySelect","cloneNode","optionElement","createElement","code","textContent","appendChild","innerHTML","dataset","default","selectedCountry","handleCountryChange","target","includedCountryCodes","filter","countryCode","formElementName","label","formFormat","formatting","edit","countryWrapper","afterCountry","format","split","fields","result","match","fieldName","newFieldName","row","line","lineCount","append","insertBefore","zoneEl","zones","ariaHidden","zoneSelect","duplicatedZoneSelect"],"mappings":"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","file":"template.addresses.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 305);\n","'use strict';\n\nvar _themeAddresses = require('@shopify/theme-addresses');\n\nvar selectors = {\n  addressContainer: '[data-address]',\n  addressFields: '[data-address-fields]',\n  addressToggle: '[data-address-toggle]',\n  addressForm: '[data-address-form]',\n  addressDeleteForm: '[data-address-delete-form]'\n}; // /* eslint-disable func-style */\n// import { AddressForm } from '@shopify/theme-addresses';\n// /**\n//  * Customer Addresses Script\n//  * ------------------------------------------------------------------------------\n//  * A file that contains scripts highly couple code to the Customer Addresses\n//  * template.\n//  *\n//  * @namespace customerAddresses\n//  */\n// import Forms from '../customers/forms';\n\n// const selectors = {\n//   addressContainer: '[data-address]',\n//   addressFields: '[data-address-fields]',\n//   addressToggle: '[data-address-toggle]',\n//   addressForm: '[data-address-form]',\n//   addressDeleteForm: '[data-address-delete-form]',\n//   addressList: '[data-address-list]',\n//   newAddressCancel: '[data-new-address-cancel]',\n//   newAddress: '[data-new-address]',\n//   addressBlock: '[data-address-block]',\n//   newAddressForm: '[data-new-address-form]',\n// };\n// const HIDE_CLASS = 'hide';\n// const addressList = document.querySelector(selectors.addressList);\n// const newAddressBtn = document.querySelector(selectors.newAddress);\n// const newAddressCancel = document.querySelector(selectors.newAddressCancel);\n// const newAddressForm = document.querySelector(selectors.newAddressForm);\n\n// function initializeAddressForm(container) {\n//   const addressFields = container.querySelector(selectors.addressFields);\n//   const addressForm = container.querySelector(selectors.addressForm);\n//   const deleteForm = container.querySelector(selectors.addressDeleteForm);\n\n//   container.querySelectorAll(selectors.addressToggle).forEach((button) => {\n//     button.addEventListener('click', (e) => {\n//       addressForm.classList.toggle(hideClass);\n\n//       const isNewAddress = e.target.hasAttribute(selectors.newAddressToggle);\n\n//       if (isNewAddress) {\n//         if (addressForm.classList.contains('hide')) {\n//           addressList.classList.remove('hide');\n//         } else {\n//           e.target.classList.add('hide');\n//           addressList.classList.add('hide');\n//         }\n//       }\n//     });\n//   });\n\n//   // newAddressButton.addEventListener('click', () => {});\n//   const formId = container.querySelector('[data-span-form-id]').dataset\n//     .spanFormId;\n//   AddressForm(addressFields, 'en', {\n//     shippingCountriesOnly: true,\n//     inputSelectors: {\n//       country: `[data-select-country-${formId}]`,\n//       zone: `[data-select-zone-${formId}]`,\n//     },\n//   });\n\n//   if (deleteForm) {\n//     deleteForm.addEventListener('submit', (event) => {\n//       const confirmMessage = deleteForm.getAttribute('data-confirm-message');\n\n//       if (\n//         !window.confirm(\n//           confirmMessage || 'Are you sure you wish to delete this address?'\n//         )\n//       ) {\n//         event.preventDefault();\n//       }\n//     });\n//   }\n// }\n\n// const addressForms = document.querySelectorAll(selectors.addressContainer);\n\n// if (addressForms.length) {\n//   newAddressCancel.addEventListener('click', () => {\n//     addressList.classList.remove('hide');\n//     document\n//       .querySelector(`[${selectors.newAddressToggle}]`)\n//       .classList.remove('hide');\n//   });\n\n//   addressForms.forEach((addressContainer) => {\n//     initializeAddressForm(addressContainer);\n//   });\n// }\n\n// // const addressBlocks = [...document.querySelectorAll(selectors.addressBlock)];\n\n// // const hideAllAddressBlocks = () =>\n// //   addressBlocks.map((block) => block.classList.add(HIDE_CLASS));\n\n// // const showAllAddressBlocks = () =>\n// //   addressBlocks.map((block) => block.classList.remove(HIDE_CLASS));\n\n// // const showFormById = (block, id) => {\n// //   block\n// //     .querySelector(`[data-address-form-id=\"${id}\"]`)\n// //     .classList.remove(HIDE_CLASS);\n// // };\n\n// // const hideForm = (block, id) => {\n// //   block\n// //     .querySelector(`[data-address-form-id=\"${id}\"]`)\n// //     .classList.add(HIDE_CLASS);\n// // };\n\n// // const hideAddNewAddressBtn = () => {\n// //   newAddressBtn.classList.add(HIDE_CLASS);\n// // };\n\n// // const showAddNewAddressBtn = () => {\n// //   newAddressBtn.classList.remove(HIDE_CLASS);\n// // };\n\n// // newAddressBtn.addEventListener('click', (evt) => {\n// //   evt.preventDefault();\n// //   hideAllAddressBlocks();\n// //   hideAddNewAddressBtn();\n// //   newAddressForm.classList.remove(HIDE_CLASS);\n// // });\n\n// // newAddressCancel.addEventListener('click', () => {\n// //   showAllAddressBlocks();\n// //   showAddNewAddressBtn();\n// //   newAddressForm.classList.add(HIDE_CLASS);\n// // });\n\n// // addressBlocks.map((block) => {\n// //   const id = block.dataset.addressBlock;\n// //   const addressFields = block.querySelector(selectors.addressFields);\n// //   const edit = block.querySelector('[data-edit-address]');\n// //   const cancel = block.querySelector('[date-form-cancel]');\n// //   const deleteBtn = block.querySelector('[data-address-form-delete]');\n// //   const deleteForm = block.querySelector(selectors.addressDeleteForm);\n\n// //   AddressForm(addressFields, 'en');\n\n// //   edit.addEventListener('click', (evt) => {\n// //     evt.preventDefault();\n// //     hideAllAddressBlocks();\n// //     block.classList.remove(HIDE_CLASS);\n// //     showFormById(block, id);\n// //     hideAddNewAddressBtn();\n// //   });\n\n// //   cancel.addEventListener('click', (evt) => {\n// //     evt.preventDefault();\n// //     showAllAddressBlocks();\n// //     hideForm(block, id);\n// //     showAddNewAddressBtn();\n// //   });\n\n// //   deleteBtn.addEventListener('click', (event) => {\n// //     event.preventDefault();\n\n// //     const confirmMessage = deleteForm.getAttribute('data-confirm-message');\n\n// //     if (\n// //       !window.confirm(\n// //         confirmMessage || 'Are you sure you wish to delete this address?'\n// //       )\n// //     ) {\n// //       event.preventDefault();\n// //     }\n// //   });\n// // });\n\n/**\n * Customer Addresses Script\n * ------------------------------------------------------------------------------\n * A file that contains scripts highly couple code to the Customer Addresses\n * template.\n *\n * @namespace customerAddresses\n */\n\nvar hideClass = 'hide';\nvar addressForms = document.querySelectorAll(selectors.addressContainer);\nvar addressesArr = Array.from(addressForms);\n\nvar hideAllBlocks = function hideAllBlocks() {\n  addressesArr.map(function (addr) {\n    return addr.classList.add(hideClass);\n  });\n};\n\nvar showAllBlocks = function showAllBlocks() {\n  addressesArr.map(function (addr) {\n    return addr.classList.remove(hideClass);\n  });\n};\n\nfunction initializeAddressForm(container) {\n  var addressFields = container.querySelector(selectors.addressFields);\n  var addressForm = container.querySelector(selectors.addressForm);\n  var deleteForm = container.querySelector(selectors.addressDeleteForm);\n\n  container.querySelectorAll(selectors.addressToggle).forEach(function (button) {\n    button.addEventListener('click', function () {\n      if (addressForm.classList.contains(hideClass)) {\n        hideAllBlocks();\n        container.classList.remove(hideClass);\n        addressForm.classList.remove(hideClass);\n        addressForm.classList.add('form-open');\n      } else {\n        container.classList.add(hideClass);\n        addressForm.classList.add(hideClass);\n        addressForm.classList.remove('form-open');\n        showAllBlocks();\n      }\n    });\n  });\n\n  (0, _themeAddresses.AddressForm)(addressFields, 'en');\n\n  if (deleteForm) {\n    deleteForm.addEventListener('submit', function (event) {\n      var confirmMessage = deleteForm.getAttribute('data-confirm-message');\n\n      if (!window.confirm(confirmMessage || 'Are you sure you wish to delete this address?')) {\n        event.preventDefault();\n      }\n    });\n  }\n}\n\nif (addressForms.length) {\n  addressForms.forEach(function (addressContainer) {\n    initializeAddressForm(addressContainer);\n  });\n}","var query = \"query countries($locale: SupportedLocale!) {\"\n  + \"  countries(locale: $locale) {\"\n  + \"    name\"\n  + \"    code\"\n  + \"    labels {\"\n  + \"      address1\"\n  + \"      address2\"\n  + \"      city\"\n  + \"      company\"\n  + \"      country\"\n  + \"      firstName\"\n  + \"      lastName\"\n  + \"      phone\"\n  + \"      postalCode\"\n  + \"      zone\"\n  + \"    }\"\n  + \"    formatting {\"\n  + \"      edit\"\n  + \"    }\"\n  + \"    zones {\"\n  + \"      name\"\n  + \"      code\"\n  + \"    }\"\n  + \"  }\"\n  + \"}\";\n\nvar GRAPHQL_ENDPOINT = 'https://country-service.shopifycloud.com/graphql';\n\nexport function loadCountries(locale) {\n  var response = fetch(GRAPHQL_ENDPOINT, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Origin': '*',\n    },\n    body: JSON.stringify({\n      query: query,\n      operationName: 'countries',\n      variables: {\n        locale: toSupportedLocale(locale),\n      },\n    }),\n  });\n\n  return response\n    .then(function(res) { return res.json() })\n    .then(function(countries) { return countries.data.countries });\n}\n\nvar DEFAULT_LOCALE = 'EN';\nexport var SUPPORTED_LOCALES = [\n  'DA',\n  'DE',\n  'EN',\n  'ES',\n  'FR',\n  'IT',\n  'JA',\n  'NL',\n  'PT',\n  'PT_BR',\n];\n\nexport function toSupportedLocale(locale) {\n  var supportedLocale = locale.replace(/-/, '_').toUpperCase();\n\n  if (SUPPORTED_LOCALES.indexOf(supportedLocale) !== -1) {\n    return supportedLocale;\n  } else if (SUPPORTED_LOCALES.indexOf(supportedLocale.substring(0, 2)) !== -1) {\n    return supportedLocale.substring(0, 2);\n  } else {\n    return DEFAULT_LOCALE;\n  }\n}\n","import {loadCountries} from './loader';\nimport {mergeObjects} from './helpers';\n\nvar FIELD_REGEXP = /({\\w+})/g;\nvar LINE_DELIMITER = '_';\nvar INPUT_SELECTORS = {\n  lastName: '[name=\"address[last_name]\"]',\n  firstName: '[name=\"address[first_name]\"]',\n  company: '[name=\"address[company]\"]',\n  address1: '[name=\"address[address1]\"]',\n  address2: '[name=\"address[address2]\"]',\n  country: '[name=\"address[country]\"]',\n  zone: '[name=\"address[province]\"]',\n  postalCode: '[name=\"address[zip]\"]',\n  city: '[name=\"address[city]\"]',\n  phone: '[name=\"address[phone]\"]',\n};\n\nexport default function AddressForm(rootEl, locale, options) {\n  locale = locale || 'en';\n  options = options || {inputSelectors: {}};\n  var formElements = loadFormElements(\n    rootEl,\n    mergeObjects(INPUT_SELECTORS, options.inputSelectors)\n  );\n\n  validateElements(formElements);\n\n  return loadShippingCountries(options.shippingCountriesOnly).then(function(\n    shippingCountryCodes\n  ) {\n    return loadCountries(locale).then(function(countries) {\n      init(\n        rootEl,\n        formElements,\n        filterCountries(countries, shippingCountryCodes)\n      );\n    });\n  });\n}\n\n/**\n * Runs when countries have been loaded\n */\nfunction init(rootEl, formElements, countries) {\n  populateCountries(formElements, countries);\n  var selectedCountry = formElements.country.input\n    ? formElements.country.input.value\n    : null;\n  setEventListeners(rootEl, formElements, countries);\n  handleCountryChange(rootEl, formElements, selectedCountry, countries);\n}\n\n/**\n * Handles when a country change: set labels, reorder fields, populate zones\n */\nfunction handleCountryChange(rootEl, formElements, countryCode, countries) {\n  var country = getCountry(countryCode, countries);\n\n  setLabels(formElements, country);\n  reorderFields(rootEl, formElements, country);\n  populateZones(formElements, country);\n}\n\n/**\n * Sets up event listener for country change\n */\nfunction setEventListeners(rootEl, formElements, countries) {\n  formElements.country.input.addEventListener('change', function(event) {\n    handleCountryChange(rootEl, formElements, event.target.value, countries);\n  });\n}\n\n/**\n * Reorder fields in the DOM and add data-attribute to fields given a country\n */\nfunction reorderFields(rootEl, formElements, country) {\n  var formFormat = country.formatting.edit;\n\n  var countryWrapper = formElements.country.wrapper;\n  var afterCountry = false;\n\n  getOrderedField(formFormat).forEach(function(row) {\n    row.forEach(function(line) {\n      formElements[line].wrapper.dataset.lineCount = row.length;\n      if (!formElements[line].wrapper) {\n        return;\n      }\n      if (line === 'country') {\n        afterCountry = true;\n        return;\n      }\n\n      if (afterCountry) {\n        rootEl.append(formElements[line].wrapper);\n      } else {\n        rootEl.insertBefore(formElements[line].wrapper, countryWrapper);\n      }\n    });\n  });\n}\n\n/**\n * Update labels for a given country\n */\nfunction setLabels(formElements, country) {\n  Object.keys(formElements).forEach(function(formElementName) {\n    formElements[formElementName].labels.forEach(function(label) {\n      label.textContent = country.labels[formElementName];\n    });\n  });\n}\n\n/**\n * Add right countries in the dropdown for a given country\n */\nfunction populateCountries(formElements, countries) {\n  var countrySelect = formElements.country.input;\n  var duplicatedCountrySelect = countrySelect.cloneNode(true);\n\n  countries.forEach(function(country) {\n    var optionElement = document.createElement('option');\n    optionElement.value = country.code;\n    optionElement.textContent = country.name;\n    duplicatedCountrySelect.appendChild(optionElement);\n  });\n\n  countrySelect.innerHTML = duplicatedCountrySelect.innerHTML;\n\n  if (countrySelect.dataset.default) {\n    countrySelect.value = countrySelect.dataset.default;\n  }\n}\n\n/**\n * Add right zones in the dropdown for a given country\n */\nfunction populateZones(formElements, country) {\n  var zoneEl = formElements.zone;\n  if (!zoneEl) {\n    return;\n  }\n\n  if (country.zones.length === 0) {\n    zoneEl.wrapper.dataset.ariaHidden = 'true';\n    zoneEl.input.innerHTML = '';\n    return;\n  }\n\n  zoneEl.wrapper.dataset.ariaHidden = 'false';\n\n  var zoneSelect = zoneEl.input;\n  var duplicatedZoneSelect = zoneSelect.cloneNode(true);\n  duplicatedZoneSelect.innerHTML = '';\n\n  country.zones.forEach(function(zone) {\n    var optionElement = document.createElement('option');\n    optionElement.value = zone.code;\n    optionElement.textContent = zone.name;\n    duplicatedZoneSelect.appendChild(optionElement);\n  });\n\n  zoneSelect.innerHTML = duplicatedZoneSelect.innerHTML;\n\n  if (zoneSelect.dataset.default) {\n    zoneSelect.value = zoneSelect.dataset.default;\n  }\n}\n\n/**\n * Will throw if an input or a label is missing from the wrapper\n */\nfunction validateElements(formElements) {\n  Object.keys(formElements).forEach(function(elementKey) {\n    var element = formElements[elementKey].input;\n    var labels = formElements[elementKey].labels;\n\n    if (!element) {\n      return;\n    }\n\n    if (typeof element !== 'object') {\n      throw new TypeError(\n        formElements[elementKey] + ' is missing an input or select.'\n      );\n    } else if (typeof labels !== 'object') {\n      throw new TypeError(formElements[elementKey] + ' is missing a label.');\n    }\n  });\n}\n\n/**\n * Given an countryCode (eg. 'CA'), will return the data of that country\n */\nfunction getCountry(countryCode, countries) {\n  countryCode = countryCode || 'CA';\n  return countries.filter(function(country) {\n    return country.code === countryCode;\n  })[0];\n}\n\n/**\n * Given a format (eg. \"{firstName}{lastName}_{company}_{address1}_{address2}_{city}_{country}{province}{zip}_{phone}\")\n * will return an array of how the form needs to be formatted, eg.:\n * =>\n * [\n *   ['firstName', 'lastName'],\n *   ['company'],\n *   ['address1'],\n *   ['address2'],\n *   ['city'],\n *   ['country', 'province', 'zip'],\n *   ['phone']\n * ]\n */\nfunction getOrderedField(format) {\n  return format.split(LINE_DELIMITER).map(function(fields) {\n    var result = fields.match(FIELD_REGEXP);\n    if (!result) {\n      return [];\n    }\n\n    return result.map(function(fieldName) {\n      var newFieldName = fieldName.replace(/[{}]/g, '');\n\n      switch (newFieldName) {\n        case 'zip':\n          return 'postalCode';\n        case 'province':\n          return 'zone';\n        default:\n          return newFieldName;\n      }\n    });\n  });\n}\n\n/**\n * Given a rootEl where all `input`s, `select`s, and `labels` are nested, it\n * will returns all form elements (wrapper, input and labels) of the form.\n * See `FormElements` type for details\n */\nfunction loadFormElements(rootEl, inputSelectors) {\n  var elements = {};\n  Object.keys(INPUT_SELECTORS).forEach(function(inputKey) {\n    var input = rootEl.querySelector(inputSelectors[inputKey]);\n    elements[inputKey] = input\n      ? {\n          wrapper: input.parentElement,\n          input: input,\n          labels: document.querySelectorAll('[for=\"' + input.id + '\"]'),\n        }\n      : {};\n  });\n\n  return elements;\n}\n\n/**\n * If shippingCountriesOnly is set to true, will return the list of countries the\n * shop ships to. Otherwise returns null.\n */\nfunction loadShippingCountries(shippingCountriesOnly) {\n  if (!shippingCountriesOnly) {\n    // eslint-disable-next-line no-undef\n    return Promise.resolve(null);\n  }\n\n  var response = fetch(location.origin + '/meta.json');\n\n  return response\n    .then(function(res) {\n      return res.json();\n    })\n    .then(function(meta) {\n      // If ships_to_countries has * in the list, it means the shop ships to\n      // all countries\n      return meta.ships_to_countries.indexOf('*') !== -1\n        ? null\n        : meta.ships_to_countries;\n    })\n    .catch(function() {\n      return null;\n    });\n}\n\n/**\n * Only returns countries that are in includedCountryCodes\n * Returns all countries if no includedCountryCodes is passed\n */\nfunction filterCountries(countries, includedCountryCodes) {\n  if (!includedCountryCodes) {\n    return countries;\n  }\n\n  return countries.filter(function(country) {\n    return includedCountryCodes.indexOf(country.code) !== -1;\n  });\n}\n","export function mergeObjects() {\n  var to = Object({});\n\n  for (var index = 0; index < arguments.length; index++) {\n    var nextSource = arguments[index];\n\n    if (nextSource) {\n      for (var nextKey in nextSource) {\n        if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n          to[nextKey] = nextSource[nextKey];\n        }\n      }\n    }\n  }\n  return to;\n}\n"],"sourceRoot":""}